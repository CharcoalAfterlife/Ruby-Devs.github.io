<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:title" content="Ruby Devs - Gallery" />
    <meta property="og:description" content="See our created Extensions!" />
    <title>Ruby Devs - Extension List</title>
    <link rel="stylesheet" href="style.css">
    <!-- Add Bootstrap CSS link -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css">
    <style>
 
/* Add custom CSS for fade-in animation */
 @keyframes fadeIn {
     from {
         opacity: 0;
         transform: translateY(20px);
    }
     to {
         opacity: 1;
         transform: translateY(0);
    }
}
 #extension-list {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
}

.extension-section {
    flex: 0 0 calc(33.333% - 20px);
    box-sizing: border-box;
    margin-bottom: 20px;
    height: 450px; /* Set a fixed height for the extension-section */
}

/* Delay animation for each box */
.extension-section:nth-child(odd) {
    animation-delay: 0.2s;
}

.extension-section:nth-child(even) {
    animation-delay: 0.4s;
}

/* Add this class to handle text overflow */
.text-overflow {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.container::after {
    content: "";
    display: table;
    clear: both;
}
/* Delay animation for each box */
 .extension-section:nth-child(odd) {
     animation-delay: 0.2s;
}
 .extension-section:nth-child(even) {
     animation-delay: 0.4s;
}
    </style>
</head>
<body class="bg-dark text-white">
  <header class="container py-4">
    <div class="row">
      <div class="col-4">
        <a href="/"><img src="logo.svg" alt="Ruby Devs Logo" height="80" class="img-fluid" style="margin-left: 20px;"></a>
      </div>
      <div class="col-8">
        <h1>Ruby Devs</h1>
        <p>We make PenguinMod and TurboWarp cooler.</p>
      </div>
    </div>
  </header>
  <p>  </p>
  <br>
  <p class="center-text">Don't know how to import extensions? Look <a href="/import_tut.html">here</a>.</p>
  <div id="extension-list" class="container py-5"></div>

  <!-- Add Bootstrap JS script link -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      fetch('https://rubyteam.tech/data/extensions.json')
        .then(response => response.json())
        .then(data => {
          const extensionList = document.getElementById('extension-list');
          data.forEach((extension, index) => {
            const section = document.createElement('section');
            section.classList.add('extension-section');

            const thumb = document.createElement('img');
            thumb.src = extension.thumb;
            thumb.classList.add('extension-thumb');

            const h2 = document.createElement('h2');
            h2.textContent = extension.name;

            const p = document.createElement('p');
            p.textContent = extension.description;

            section.appendChild(thumb);
            section.appendChild(h2);
            section.appendChild(p);

            const button = document.createElement('button');
            button.textContent = "Try " + extension.name;
            button.classList.add('btn', 'btn-primary', 'mr-2');
            button.addEventListener('click', function () {
              fetchExtension(extension.url, extension.name);
            });

            section.appendChild(button);

            if (extension.howto) {
              const howto = document.createElement('a');
              howto.href = extension.howto;
              howto.textContent = "How to import";
              howto.classList.add('btn', 'btn-secondary');
              section.appendChild(howto);
            }

            extensionList.appendChild(section);
          });
        })
        .catch(error => console.error('Error fetching extensions.json:', error));
    });

    function fetchExtension(url, name) {
      fetch(url)
        .then(response => response.blob())
        .then(blob => {
          const link = document.createElement('a');
          link.href = URL.createObjectURL(blob);
          link.download = name + ".js";
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
        })
        .catch(error => {
          console.error('Error fetching and downloading the file:', error);
        });
    }
  </script>
</body>
</html>
