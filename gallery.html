<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:title" content="Ruby Devs - Gallery" />
    <meta property="og:description" content="See our created Extensions!" />
    <title>Ruby Devs - Extension List</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-dark text-white">
  <header class="container py-4">
    <div class="row">
      <div class="col-4">
        <a href="/"><img src="logo.svg" alt="Ruby Devs Logo" height="80" class="img-fluid" style="margin-left: 20px;"></a>
      </div>
      <div class="col-8">
        <h1>Ruby Devs</h1>
        <p>We make PenguinMod and TurboWarp cooler.</p>
      </div>
    </div>
  </header>
  <p>  </p>
  <br>
  <p class="center-text">Don't know how to import extensions? Look <a href="/import_tut.html">here</a>.</p>
  <div id="extension-list" class="container py-5"></div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      fetch('https://rubyteam.tech/data/extensions.json')
        .then(response => response.json())
        .then(data => {
          const extensionList = document.getElementById('extension-list');
          data.forEach(extension => {
            const section = document.createElement('section');
            section.classList.add('extension-section');
    
            const thumb = document.createElement('img');
            thumb.src = extension.thumb;
            thumb.classList.add('extension-thumb');
    
            const h2 = document.createElement('h2');
            h2.textContent = extension.name;
    
            const p = document.createElement('p');
            p.textContent = extension.description;
    
            section.appendChild(thumb);
            section.appendChild(h2);
            section.appendChild(p);
    
            const button = document.createElement('button');
            button.textContent = "Try " + extension.name;
            button.classList.add('btn', 'btn-primary', 'mr-2');
            button.addEventListener('click', function () {
              fetchExtension(extension.url, extension.name);
            });
    
            section.appendChild(button);
    
            if (extension.howto) {
              const howto = document.createElement('a');
              howto.href = extension.howto;
              howto.textContent = "How to import";
              howto.classList.add('btn', 'btn-secondary');
              section.appendChild(howto);
            }
    
            extensionList.appendChild(section);
          });
        })
        .catch(error => console.error('Error fetching extensions.json:', error));
    });
    
    function fetchExtension(url, name) {
      fetch(url)
        .then(response => response.blob()) // Get the response as a blob
        .then(blob => {
          // Create a link element
          const link = document.createElement('a');
          // Set the href attribute of the link to the Blob URL
          link.href = URL.createObjectURL(blob);
          // Set the download attribute with the desired file name
          link.download = name + ".js";
          // Append the link to the document
          document.body.appendChild(link);
          // Trigger a click on the link to start the download
          link.click();
          // Remove the link from the document
          document.body.removeChild(link);
        })
        .catch(error => {
          console.error('Error fetching and downloading the file:', error);
        });
    }
    </script>
    
</body>
</html>
